<!doctype html>
<html lang=en>
<head>
    <meta charset=utf-8>
    <title>WebRC :: Sound control</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.2.4/jquery.min.js"></script>
</head>
<body>
    <audio controls preload="none">
        <source  src=""/>
        Not supportet in this browser
    </audio>
</body>
</html>
<script>
    $(function () {
        var audio = $('audio')[0];
        var streamStarted = false;

        var streamSrc = 'http://rpi-local.msensk.ru:8090/sound.wav';
        var servletUrl = 'http://rpi-local.msensk.ru:8080/webrc/soundServlet?command=';

//        var streamSrc = 'http://'+window.location.hostname+':8090/sound.wav';
//        var servletUrl = '/webrc/soundServlet?command=';
        $('audio').children().attr('src', streamSrc);

//        startStream(servletUrl);
        $.post(servletUrl + 'start');

        $('audio').on('pause', function () {
            $.post(servletUrl + 'stop', function () {
                $('audio')[0].currentTime = 0;
            });
        });

    })

//    function startStream(servletUrl){
//        $.post(servletUrl + 'start', function () {
//            $('audio')[0].play();
//        });
//    }
</script>
